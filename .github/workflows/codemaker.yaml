on: [push]
branches:
  - master

jobs:
  codemakerai_generation_job:
    runs-on: ubuntu-latest
    name: A job to run CodeMaker AI code generation
    steps:
      # To use this repository's private action,
      # you must check out the repository
      - name: Checkout
        uses: actions/checkout@v4
      - name: Code generation
        uses: codemakerai/codemaker-action@v1.5.0
        with:
          api-key: ${{ secrets.CODEMAKER_API_KEY }}
          mode: code
          path: src/main/**/*.java
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v6
        with:
          commit-message: Code generated by CodeMaker AI
          title: Changes by codemaker-action
          body: This pull request contains code generated by CodeMaker AI.
          branch: codemakerai-generate
