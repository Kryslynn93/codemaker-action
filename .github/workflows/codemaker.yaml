on: [workflow_dispatch]
jobs:
  codemakerai_generation_job:
    runs-on: ubuntu-latest
    name: A job to run codemakerai code generation
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Code generation
        uses: codemakerai/codemaker-action@v1.3.0
        with:
          api-key: ${{ secrets.CODEMAKER_API_KEY }}
          mode: code # code, docs or unit-tests
          path: app/src/main/java/ai/codemaker/demo/dao/*.java
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v6
        with:
          commit-message: Code generated by codemaker
          title: Changes by codemaker-action
          body: This pull request contains code generated by codemaker.
          branch: codemakerai-generate
        with:
          commit-message: Code generated by CodeMaker AI
          title: Changes by codemaker-action
          body: This pull request contains code generated by CodeMaker AI.
          branch: codemakerai-generate
